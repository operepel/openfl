# Compose an SFL "Simulation FL" plan in JSON/YAML.
# * Plan is consumed by bin/run_sim_from_sflplan.py and 
# *     bin/create_initial_weights_file_from_plan.py 

# * values for first level keys: model, aggregator, and collaborator
# * pass in the generic kwargs for those constructors
# * (i.e. collaborator id will be collaborator specific)

# * values for first level keys: model and data pass in the generic 
# * kwargs for get_model and get_data functions

# * The model version is used to validate model updates
# * Aggregator, collaborator, and fed ids (as well as model version) are currently
# * used to validate message headers. Collaborator ids are also 
# * used for identifying the data folder of each collaborator
# * (using the local_data_config yaml file)

# We may have several plans for one dataset, to search the best model architecture for exammple.

task            : brats
version         : '1'
description     : Train a model to perform semantic segmentation on brain fMRI images.
status          : active
simulation      : fl_brats_2dunet

model:
  code_path: models.brats_2dunet_tensorflow
  class_name: TensorFlow2DUNet

aggregator:
  id             : &agg_id_str 'agg_0'
  fed_id         : &fed_id_str 'fed_0'
  col_ids        : 
    - &col_id_1 'col_2'
    - &col_id_2 'col_3'
  
federation:
  rounds         : 2
  initial_weights: TensorFlow2DUNet_init.pbuf
  latest_weights : TensorFlow2DUNet_latest.pbuf
  best_weights   : TensorFlow2DUNet_best.pbuf

collaborators:
  col_ids: 
    - *col_id_1
    - *col_id_2
  agg_id : *agg_id_str
  fed_id : *fed_id_str
  model_version : *model_version_num


