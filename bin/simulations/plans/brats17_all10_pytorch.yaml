# Compose an SFL "Simulation FL" plan in JSON/YAML.
# * Task name
# * Task description
# * The folder path to the locally runnable code.
# * The software dependency.
# * FL parameters: fed_id, opt_treatment.

# TODO: enforce certain fields to be identical?

# We may have several plans for one dataset, to search the best model architecture for exammple.

task            : brats
version         : '1'
description     : Train a model to perform semantic segmentation on brain fMRI images.
status          : active
simulation      : fl_brats_2dunet

model:
  name     : brats_2dunet_pytorch
  code_path: models.brats_2dunet_pytorch
  version : &model_version_num 0
  params: {}

aggregator:
  id             : &agg_id_str '0'
  fed_id         : &fed_id_str '0'
  col_ids        : 
    - &col_id_0 '0'
    - &col_id_1 '1'
    - &col_id_2 '2'
    - &col_id_3 '3'
    - &col_id_4 '4'
    - &col_id_5 '5'
    - &col_id_6 '6'
    - &col_id_7 '7'
    - &col_id_8 '8'
    - &col_id_9 '9'
  
federation:
  rounds         : 50
  initial_weights: PyTorch2DUNet_all10_init.pbuf
  latest_weights : PyTorch2DUNet_all10_latest.pbuf
  best_weights   : PyTorch2DUNet_all10_best.pbuf

collaborators:
  col_ids: 
    - *col_id_0
    - *col_id_1
    - *col_id_2
    - *col_id_3
    - *col_id_4
    - *col_id_5
    - *col_id_6
    - *col_id_7
    - *col_id_8
    - *col_id_9
  agg_id : *agg_id_str
  fed_id : *fed_id_str
  model_version : *model_version_num
  
data: 
  code_path: models.brats_2dunet_pytorch
  percent_train: *percent_train_val
  shuffle: *shuffle_val

